{"version":3,"file":"nprogress.umd.js","sources":["../src/nprogress.js"],"sourcesContent":["const NProgress = {};\n\nNProgress.version = \"0.2.0\";\n\nvar Settings = (NProgress.settings = {\n  minimum: 0.08,\n  easing: \"linear\",\n  positionUsing: \"\",\n  speed: 200,\n  trickle: true,\n  trickleSpeed: 200,\n  showSpinner: true,\n  barSelector: '[role=\"bar\"]',\n  spinnerSelector: '[role=\"spinner\"]',\n  parent: \"body\",\n  template:\n    '<div class=\"bar\" role=\"bar\"><div class=\"peg\"></div></div><div class=\"spinner\" role=\"spinner\"><div class=\"spinner-icon\"></div></div>',\n});\n\n/**\n * Updates configuration.\n *\n *     NProgress.configure({\n *       minimum: 0.1\n *     });\n */\nNProgress.configure = function (options) {\n  var key, value;\n  for (key in options) {\n    value = options[key];\n    if (value !== undefined && options.hasOwnProperty(key))\n      Settings[key] = value;\n  }\n\n  return this;\n};\n\n/**\n * Last number.\n */\n\nNProgress.status = null;\n\n/**\n * Sets the progress bar status, where `n` is a number from `0.0` to `1.0`.\n * @param {number} n\n * @example\n *     NProgress.set(0.4);\n *     NProgress.set(1.0);\n */\n\nNProgress.set = function (n) {\n  var started = NProgress.isStarted();\n\n  n = clamp(n, Settings.minimum, 1);\n  NProgress.status = n === 1 ? null : n;\n\n  var progress = NProgress.render(!started),\n    bar = progress.querySelector(Settings.barSelector),\n    speed = Settings.speed,\n    ease = Settings.easing;\n\n  progress.offsetWidth; /* Repaint */\n\n  queue(function (next) {\n    // Set positionUsing if it hasn't already been set\n    if (Settings.positionUsing === \"\")\n      Settings.positionUsing = NProgress.getPositioningCSS();\n\n    // Add transition\n    css(bar, barPositionCSS(n, speed, ease));\n\n    if (n === 1) {\n      // Fade out\n      css(progress, {\n        transition: \"none\",\n        opacity: 1,\n      });\n      progress.offsetWidth; /* Repaint */\n\n      setTimeout(function () {\n        css(progress, {\n          transition: \"all \" + speed + \"ms linear\",\n          opacity: 0,\n        });\n        setTimeout(function () {\n          NProgress.remove();\n          next();\n        }, speed);\n      }, speed);\n    } else {\n      setTimeout(next, speed);\n    }\n  });\n\n  return this;\n};\n\nNProgress.isStarted = function () {\n  return typeof NProgress.status === \"number\";\n};\n\n/**\n * Shows the progress bar.\n * This is the same as setting the status to 0%, except that it doesn't go backwards.\n *\n * @example\n *     NProgress.start();\n */\n\nNProgress.start = function () {\n  if (!NProgress.status) NProgress.set(0);\n\n  var work = function () {\n    setTimeout(function () {\n      if (!NProgress.status) return;\n      NProgress.trickle();\n      work();\n    }, Settings.trickleSpeed);\n  };\n\n  if (Settings.trickle) work();\n\n  return this;\n};\n\n/**\n * Hides the progress bar.\n * This is the *sort of* the same as setting the status to 100%, with the\n * difference being `done()` makes some placebo effect of some realistic motion.\n *\n *     NProgress.done();\n *\n * If `true` is passed, it will show the progress bar even if its hidden.\n *\n *     NProgress.done(true);\n */\n\nNProgress.done = function (force) {\n  if (!force && !NProgress.status) return this;\n\n  return NProgress.inc(0.3 + 0.5 * Math.random()).set(1);\n};\n\n/**\n * Increments by a random amount.\n */\n\nNProgress.inc = function (amount) {\n  var n = NProgress.status;\n\n  if (!n) {\n    return NProgress.start();\n  } else if (n > 1) {\n    return;\n  } else {\n    if (typeof amount !== \"number\") {\n      if (n >= 0 && n < 0.2) {\n        amount = 0.1;\n      } else if (n >= 0.2 && n < 0.5) {\n        amount = 0.04;\n      } else if (n >= 0.5 && n < 0.8) {\n        amount = 0.02;\n      } else if (n >= 0.8 && n < 0.99) {\n        amount = 0.005;\n      } else {\n        amount = 0;\n      }\n    }\n\n    n = clamp(n + amount, 0, 0.994);\n    return NProgress.set(n);\n  }\n};\n\nNProgress.trickle = function () {\n  return NProgress.inc();\n};\n\n/**\n * Waits for all supplied jQuery promises and\n * increases the progress as the promises resolve.\n *\n * @param $promise jQUery Promise\n */\n(function () {\n  var initial = 0,\n    current = 0;\n\n  NProgress.promise = function ($promise) {\n    if (!$promise || $promise.state() === \"resolved\") {\n      return this;\n    }\n\n    if (current === 0) {\n      NProgress.start();\n    }\n\n    initial++;\n    current++;\n\n    $promise.always(function () {\n      current--;\n      if (current === 0) {\n        initial = 0;\n        NProgress.done();\n      } else {\n        NProgress.set((initial - current) / initial);\n      }\n    });\n\n    return this;\n  };\n})();\n\n/**\n * (Internal) renders the progress bar markup based on the `template`\n * setting.\n */\n\nNProgress.render = function (fromStart) {\n  if (NProgress.isRendered()) return document.getElementById(\"nprogress\");\n\n  addClass(document.documentElement, \"nprogress-busy\");\n\n  var progress = document.createElement(\"div\");\n  progress.id = \"nprogress\";\n  progress.innerHTML = Settings.template;\n\n  var bar = progress.querySelector(Settings.barSelector),\n    perc = fromStart ? \"-100\" : toBarPerc(NProgress.status || 0),\n    parent = document.querySelector(Settings.parent),\n    spinner;\n\n  css(bar, {\n    transition: \"all 0 linear\",\n    transform: \"translate3d(\" + perc + \"%,0,0)\",\n  });\n\n  if (!Settings.showSpinner) {\n    spinner = progress.querySelector(Settings.spinnerSelector);\n    spinner && removeElement(spinner);\n  }\n\n  if (parent != document.body) {\n    addClass(parent, \"nprogress-custom-parent\");\n  }\n\n  parent.appendChild(progress);\n  return progress;\n};\n\n/**\n * Removes the element. Opposite of render().\n */\n\nNProgress.remove = function () {\n  removeClass(document.documentElement, \"nprogress-busy\");\n  removeClass(\n    document.querySelector(Settings.parent),\n    \"nprogress-custom-parent\"\n  );\n  var progress = document.getElementById(\"nprogress\");\n  progress && removeElement(progress);\n};\n\n/**\n * Checks if the progress bar is rendered.\n */\n\nNProgress.isRendered = function () {\n  return !!document.getElementById(\"nprogress\");\n};\n\n/**\n * Determine which positioning CSS rule to use.\n */\n\nNProgress.getPositioningCSS = function () {\n  // Sniff on document.body.style\n  var bodyStyle = document.body.style;\n\n  // Sniff prefixes\n  var vendorPrefix =\n    \"WebkitTransform\" in bodyStyle\n      ? \"Webkit\"\n      : \"MozTransform\" in bodyStyle\n      ? \"Moz\"\n      : \"msTransform\" in bodyStyle\n      ? \"ms\"\n      : \"OTransform\" in bodyStyle\n      ? \"O\"\n      : \"\";\n\n  if (vendorPrefix + \"Perspective\" in bodyStyle) {\n    // Modern browsers with 3D support, e.g. Webkit, IE10\n    return \"translate3d\";\n  } else if (vendorPrefix + \"Transform\" in bodyStyle) {\n    // Browsers without 3D support, e.g. IE9\n    return \"translate\";\n  } else {\n    // Browsers without translate() support, e.g. IE7-8\n    return \"margin\";\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction clamp(n, min, max) {\n  if (n < min) return min;\n  if (n > max) return max;\n  return n;\n}\n\n/**\n * (Internal) converts a percentage (`0..1`) to a bar translateX\n * percentage (`-100%..0%`).\n * @param {Number} n\n */\n\nfunction toBarPerc(n) {\n  return (-1 + n) * 100;\n}\n\n/**\n * (Internal) returns the correct CSS for changing the bar's\n * position given an n percentage, and speed and ease from Settings\n */\n\nfunction barPositionCSS(n, speed, ease) {\n  var barCSS;\n\n  if (Settings.positionUsing === \"translate3d\") {\n    barCSS = { transform: \"translate3d(\" + toBarPerc(n) + \"%,0,0)\" };\n  } else if (Settings.positionUsing === \"translate\") {\n    barCSS = { transform: \"translate(\" + toBarPerc(n) + \"%,0)\" };\n  } else {\n    barCSS = { \"margin-left\": toBarPerc(n) + \"%\" };\n  }\n\n  barCSS.transition = \"all \" + speed + \"ms \" + ease;\n\n  return barCSS;\n}\n\n/**\n * (Internal) Queues a function to be executed.\n */\n\nvar queue = (function () {\n  var pending = [];\n\n  function next() {\n    var fn = pending.shift();\n    if (fn) {\n      fn(next);\n    }\n  }\n\n  return function (fn) {\n    pending.push(fn);\n    if (pending.length == 1) next();\n  };\n})();\n\n/**\n * (Internal) Applies css properties to an element, similar to the jQuery\n * css method.\n *\n * While this helper does assist with vendor prefixed property names, it\n * does not perform any manipulation of values prior to setting styles.\n */\n\nvar css = (function () {\n  var cssPrefixes = [\"Webkit\", \"O\", \"Moz\", \"ms\"],\n    cssProps = {};\n\n  function camelCase(string) {\n    return string\n      .replace(/^-ms-/, \"ms-\")\n      .replace(/-([\\da-z])/gi, function (match, letter) {\n        return letter.toUpperCase();\n      });\n  }\n\n  function getVendorProp(name) {\n    var style = document.body.style;\n    if (name in style) return name;\n\n    var i = cssPrefixes.length,\n      capName = name.charAt(0).toUpperCase() + name.slice(1),\n      vendorName;\n    while (i--) {\n      vendorName = cssPrefixes[i] + capName;\n      if (vendorName in style) return vendorName;\n    }\n\n    return name;\n  }\n\n  function getStyleProp(name) {\n    name = camelCase(name);\n    return cssProps[name] || (cssProps[name] = getVendorProp(name));\n  }\n\n  function applyCss(element, prop, value) {\n    prop = getStyleProp(prop);\n    element.style[prop] = value;\n  }\n\n  return function (element, properties) {\n    var args = arguments,\n      prop,\n      value;\n\n    if (args.length == 2) {\n      for (prop in properties) {\n        value = properties[prop];\n        if (value !== undefined && properties.hasOwnProperty(prop))\n          applyCss(element, prop, value);\n      }\n    } else {\n      applyCss(element, args[1], args[2]);\n    }\n  };\n})();\n\n/**\n * (Internal) Determines if an element or space separated list of class names\n * contains a class name.\n * @param {Node} element\n * @param {string} name\n */\n\nfunction hasClass(element, name) {\n  var list = typeof element == \"string\" ? element : classList(element);\n  return list.indexOf(\" \" + name + \" \") >= 0;\n}\n\n/**\n * (Internal) Adds a class to an element.\n * @param {Node} element\n * @param {string} name\n */\n\nfunction addClass(element, name) {\n  var oldList = classList(element),\n    newList = oldList + name;\n\n  if (hasClass(oldList, name)) return;\n\n  // Trim the opening space.\n  element.className = newList.substring(1);\n}\n\n/**\n * (Internal) Removes a class from an element.\n */\n\nfunction removeClass(element, name) {\n  var oldList = classList(element),\n    newList;\n\n  if (!hasClass(element, name)) return;\n\n  // Replace the class name.\n  newList = oldList.replace(\" \" + name + \" \", \" \");\n\n  // Trim the opening and closing spaces.\n  element.className = newList.substring(1, newList.length - 1);\n}\n\n/**\n * (Internal) Gets a space separated list of the class names on the element.\n * The list is wrapped with a single space on each end to facilitate finding\n * matches within the list.\n */\n\nfunction classList(element) {\n  return (\" \" + ((element && element.className) || \"\") + \" \").replace(\n    /\\s+/gi,\n    \" \"\n  );\n}\n\n/**\n * (Internal) Removes an element from the DOM.\n */\n\nfunction removeElement(element) {\n  element && element.parentNode && element.parentNode.removeChild(element);\n}\n\nexport default NProgress;\n"],"names":["const","initial","current","NProgress","Settings","settings","minimum","easing","positionUsing","speed","trickle","trickleSpeed","showSpinner","barSelector","spinnerSelector","parent","template","clamp","n","min","max","toBarPerc","configure","options","key","value","undefined","hasOwnProperty","this","status","set","started","isStarted","progress","render","bar","querySelector","ease","queue","next","getPositioningCSS","css","barCSS","transform","transition","barPositionCSS","opacity","setTimeout","remove","start","work","done","force","inc","Math","random","amount","promise","$promise","state","always","fromStart","isRendered","document","getElementById","addClass","documentElement","createElement","id","innerHTML","spinner","perc","removeElement","body","appendChild","removeClass","bodyStyle","style","vendorPrefix","pending","fn","shift","push","length","cssPrefixes","cssProps","applyCss","element","prop","name","replace","match","letter","toUpperCase","vendorName","i","capName","charAt","slice","getVendorProp","properties","args","arguments","hasClass","classList","indexOf","oldList","newList","className","substring","parentNode","removeChild"],"mappings":"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"}